<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="my_report_saleorder_document"
        inherit_id="sale.report_saleorder_document"
    >
        <xpath expr='//t[@t-call="web.external_layout"]' position="replace">
            <t t-call="web.report_layout">
                <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
                <t t-set="forced_vat" t-value="doc.fiscal_position_id.foreign_vat" />

                <strong t-esc="doc.company_id.name" style="font-size:18px" />
                <div
                    t-if="doc.company_id.vat"
                    t-esc="doc.company_id.vat"
                    style="font-size:18px"
                />
                <div
                    t-if="doc.company_id.phone"
                    t-esc="doc.company_id.phone"
                    style="font-size:18px"
                />
                <div
                    t-if="doc.company_id.email"
                    t-esc="doc.company_id.email"
                    style="font-size:18px"
                />

                <div>
                    <div />

                    <t>
                        <span style="font-size:18px">Orden: </span>
                        <span t-field="doc.name" style="font-size:18px">SO0000</span>
                    </t>

                    <div>
                        <div>
                            <strong style="font-size:18px">Fecha</strong>
                            <span
                                style="font-size:18px"
                                t-field="doc.date_order"
                                t-options='{"widget": "date"}'
                            >2023-12-31</span>
                        </div>

                        <div t-if="doc.user_id.name" class="col" style="font-size:18px">
                            <strong style="font-size:18px">Vendedor</strong>
                            <span
                                t-field="doc.user_id"
                                style="font-size:18px"
                            >Mitchell Admin</span>
                        </div>
                    </div>

                    <!-- Is there a discount on at least one line? -->
                    <t
                        t-set="lines_to_report"
                        t-value="doc._get_order_lines_to_report()"
                    />
                    <t
                        t-set="display_discount"
                        t-value="any(l.discount for l in lines_to_report)"
                    />

                    <div>
                        <strong style="font-size:18px">Cliente</strong>
                        <span
                            t-field="doc.partner_id"
                            style="font-size:18px"
                        >Mitchell Admin</span>
                    </div>

                    <div>
                        <strong style="font-size:18px">Direcci√≥n</strong>
                        <div
                            t-field="doc.partner_id"
                            t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'
                            style="font-size:18px"
                        >Mitchell Admin</div>
                    </div>

                    <div>
                        <strong style="font-size:18px">Producto</strong>
                    </div>
                    <div>
                        <strong
                            style="font-size:18px"
                        >Cantidad - Precio - Subtotal</strong>
                    </div>

                    <table>
                        <!-- In case we want to repeat the header, remove "display: table-row-group" -->

                        <tbody class="sale_tbody">
                            <t t-set="current_subtotal" t-value="0" />

                            <t t-foreach="lines_to_report" t-as="line">
                                <t
                                    t-set="current_subtotal"
                                    t-value="current_subtotal + line.price_subtotal"
                                />

                                <tr
                                    t-att-class="'fw-bold o_line_section' if (
                                line.display_type == 'line_section'
                                or line.product_type == 'combo'
                            )
                            else 'fst-italic o_line_note' if line.display_type == 'line_note'
                            else ''"
                                >
                                    <td name="td_name">
                                        <span
                                            t-field="line.name"
                                            style="font-size:18px"
                                        >Bacon Burger</span>
                                    </td>
                                </tr>
                                <tr style="font-size:18px">
                                    <td
                                        name="td_quantity"
                                        class="text-start text-nowrap"
                                    >
                                        <span
                                            t-field="line.product_uom_qty"
                                            style="font-size:18px"
                                        >3</span>
                                        <span
                                            t-field="line.product_uom"
                                            style="font-size:18px"
                                        >units</span>
                                    </td>
                                    <td
                                        name="td_priceunit"
                                        class="text-end text-nowrap"
                                    >
                                        <span t-field="line.price_unit">3</span>
                                    </td>
                                    <td
                                        t-if="not line.is_downpayment"
                                        name="td_subtotal"
                                        class="text-end"
                                    >
                                        <span t-field="line.price_subtotal">27.00</span>
                                    </td>
                                </tr>

                                <t
                                    t-if="current_section and (
                                line_last
                                or lines_to_report[line_index+1].display_type == 'line_section'
                                or lines_to_report[line_index+1].product_type == 'combo'
                                or (
                                    line.combo_item_id
                                    and not lines_to_report[line_index+1].combo_item_id
                                )
                            ) and not line.is_downpayment"
                                >
                                    <t t-set="current_section" t-value="None" />
                                    <tr class="is-subtotal text-end">
                                        <td name="td_section_subtotal" colspan="99">
                                            <strong class="mr16">Subtotal</strong>
                                            <span
                                                t-out="current_subtotal"
                                                t-options='{"widget": "monetary", "display_currency": doc.currency_id}'
                                            >31.05</span>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <br />
                    <tr class="o_total">
                        <td>
                            <strong style="font-size:24px">Total</strong>
                        </td>
                        <td class="text-end">
                            <strong
                                t-out="doc.tax_totals['total_amount_currency']"
                                style="font-size:24px"
                            >31.05</strong>
                        </td>
                    </tr>
                </div>
            </t>
        </xpath>
    </template>
</odoo>
